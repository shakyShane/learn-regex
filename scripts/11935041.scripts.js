!function(a){var b,c=a();a.fn.sortable=function(d){var e=String(d);return d=a.extend({connectWith:!1},d),this.each(function(){if(/^enable|disable|destroy$/.test(e)){var f=a(this).children(a(this).data("items")).attr("draggable","enable"==e);return"destroy"==e&&f.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"),void 0}var g,h,f=a(this).children(d.items),i=a("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');f.find(d.handle).mousedown(function(){g=!0}).mouseup(function(){g=!1}),a(this).data("items",d.items),c=c.add(i),d.connectWith&&a(d.connectWith).add(this).data("connectWith",d.connectWith),f.attr("draggable","true").on("dragstart.h5s",function(c){if(d.handle&&!g)return!1;g=!1;var e=c.originalEvent.dataTransfer;e.effectAllowed="move",e.setData("Text","dummy"),h=(b=a(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){b&&(b.removeClass("sortable-dragging").show(),c.detach(),h!=b.index()&&b.parent().trigger("sortupdate",{item:b}),b=null)}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,i]).on("dragover.h5s dragenter.h5s drop.h5s",function(e){return f.is(b)||d.connectWith===a(b).parent().data("connectWith")?"drop"==e.type?(e.stopPropagation(),c.filter(":visible").after(b),b.trigger("dragend.h5s"),!1):(e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",f.is(this)?(d.forcePlaceholderSize&&i.height(b.outerHeight()),b.hide(),a(this)[i.index()<a(this).index()?"after":"before"](i),c.not(i).detach()):c.is(this)||a(this).children(d.items).length||(c.detach(),a(this).append(i)),!1):!0})})}}(jQuery),function(){function a(){var b=Object.create(RegExp.prototype);return b=RegExp.apply(b,arguments)||b,a.injectClassMethods(b),b}function b(){return new a}var c=this;a.injectClassMethods=function(b){for(var c in a.prototype)a.prototype.hasOwnProperty(c)&&(b[c]=a.prototype[c]);return b},a.prototype={_prefixes:"",_source:"",_suffixes:"",_modifiers:"gm",sanitize:function(a){return a.source?a.source:"number"==typeof a?a:a.replace(/[\\^$|()\[\]{}.*+?]/g,"\\$&")},add:function(a){return this._source+=a||"",this.compile(this._prefixes+this._source+this._suffixes,this._modifiers),this},startOfLine:function(a){return a=0!=a,this._prefixes=a?"^":"",this.add(""),this},endOfLine:function(a){return a=0!=a,this._suffixes=a?"$":"",this.add(""),this},then:function(a){return a=this.sanitize(a),this.add("(?:"+a+")"),this},find:function(a){return this.then(a)},maybe:function(a){return a=this.sanitize(a),this.add("(?:"+a+")?"),this},anything:function(){return this.add("(?:.*)"),this},anythingBut:function(a){return a=this.sanitize(a),this.add("(?:[^"+a+"]*)"),this},something:function(){return this.add("(?:.+)"),this},somethingBut:function(a){return a=this.sanitize(a),this.add("(?:[^"+a+"]+)"),this},replace:function(a,b){return a=a.toString(),a.replace(this,b)},lineBreak:function(){return this.add("(?:(?:\\n)|(?:\\r\\n))"),this},br:function(){return this.lineBreak()},tab:function(){return this.add("\\t"),this},word:function(){return this.add("\\w+"),this},anyOf:function(a){return a=this.sanitize(a),this.add("["+a+"]"),this},manyOf:function(a){return a=this.sanitize(a),this.add("["+a+"]+"),this},many:function(a){return this.manyOf(a)},any:function(a){return this.anyOf(a)},range:function(){for(var a="[",b=0;b<arguments.length;b+=2){var c=b+1;if(arguments.length<=e)break;var d=this.sanitize(arguments[b]),e=this.sanitize(arguments[c]);a+=d+"-"+e}return a+="]",this.add(a),this},addModifier:function(a){return-1==this._modifiers.indexOf(a)&&(this._modifiers+=a),this.add(""),this},removeModifier:function(a){return this._modifiers=this._modifiers.replace(a,""),this.add(""),this},withAnyCase:function(a){return 0!=a?this.addModifier("i"):this.removeModifier("i"),this.add(""),this},stopAtFirst:function(a){return 0!=a?this.removeModifier("g"):this.addModifier("g"),this.add(""),this},searchOneLine:function(a){return 0!=a?this.removeModifier("m"):this.addModifier("m"),this.add(""),this},multiple:function(a){switch(a=a.source?a.source:this.sanitize(a),a.substr(-1)){case"*":case"+":break;default:a+="+"}return this.add(a),this},or:function(a){return this._prefixes+="(?:",this._suffixes=")"+this._suffixes,this.add(")|(?:"),a&&this.then(a),this},beginCapture:function(){return this._suffixes+=")",this.add("(",!1),this},endCapture:function(){return this._suffixes=this._suffixes.substring(0,this._suffixes.length-1),this.add(")",!0),this}},"undefined"!=typeof module&&module.exports?module.exports=b:"function"==typeof define&&define.amd?define(a):c.VerEx=b}.call(),angular.module("ngRegexApp",[]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"ListCtrl"}).when("/myroute",{templateUrl:"views/myroute.html",controller:"MyrouteCtrl"}).otherwise({redirectTo:"/"})}]);var regexApp=angular.module("ngRegexApp");regexApp.factory("MethodService",function(){return{isDup:function(a,b){var c=!1;return angular.forEach(a.regexSections,function(a){a.method===b&&(c=!0)},this),c},addSection:function(a,b,c,d){if(("modifier"!==b.type||!this.isDup(a,b.method))&&this.verifyParam(b,c,d)){c=this.transformParam(b,c,d),this.addVerbalSection(a,b,c);var e=this.setRegexSection(a,b,c),f=this.addRegexSection(a,e);f&&(this.resetInput(b),this.resetErrors(a))}},resetErrors:function(a){a.errorMessage=""},resetInput:function(a){"range"===a.type&&(a.inputVal1="",a.inputVal2=""),a.inputVal=""},verifyParam:function(a,b,c){return"input"!==a.type||b?"range"!==a.type||"undefined"!=typeof b&&"undefined"!=typeof c?!0:!1:!1},escapeStringForRegex:function(a){return a&&"string"==typeof a?a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"):"number"==typeof a?a:a},buildRegex:function(a,b,c){try{var d=this.createRegexes(b)}catch(e){return this.showError(a,e,c),!1}a.shorthandRegex=d.shorthand;var f=d.longhand.replace(/^\//,""),g=/[a-z]{1,4}$/.exec(f);f=f.replace(/\/[a-z]{1,4}$/,"");var h='var tester = new RegExp("'+f+'", "'+g+'");';return h},showError:function(a,b,c){var d=this.removeSectionByHash(a,c);d&&(a.errorMessage="There were problems, yo! It was the last one you added: "+d.method)},addRegexSection:function(a,b){var c=this.buildRegex(a,a.js_code,b);return c?(a.regex=c,!0):!1},addVerbalSection:function(a,b,c){("modifier"==b.type||"single"==b.type)&&(c="Space"===b.name?b.param='"  "':""),"input"==b.type&&(c='\\"'===c?'"\\""':'"'+c+'"'),"range"==b.type&&(c='"'+c[0]+'", "'+c[1]+'"'),a.js_code?a.js_code+="."+b.method+"("+c+")":a.js_code=this.js_starter_code+"."+b.method+"("+c+")"},addOneVerbalSection:function(a,b,c){if("modifier"===b||"single"===b)return"."+a+"()";if("range"===b){var d=c.split("-");return"."+a+'("'+d[0]+'", "'+d[1]+'")'}return c=void 0===c||null===c?"":'"'+c+'"',"."+a+"("+c+")"},runTest:function(scope,testString){if(!testString||""===testString)return this.resetRegexTestCode(scope),this.resetResult(scope),!1;var resultCode=this.buildJsTestCode(scope.js_code,testString),result=eval(resultCode);return scope.regexTestCode=this.getRegexTestCode(testString),scope.result=result},resetRegexTestCode:function(a){a.regexTestCode=this.initRegexTestCode()},resetResult:function(a){a.result="n/a"},getRegexSections:function(a){return a.regexSections||[]},setParam:function(a,b){return angular.isArray(b)&&"range"===a.type?b.join("-"):b},setRegexSection:function(a,b,c){var d=b;return 0===a.regexSections.length?(b.param=this.setParam(b,c),b.escapedParam=this.escapeStringForRegex(c),b.sortOrder=0,a.regexSections.push(b)):(angular.forEach(a.regexSections,function(a){d.$$hashKey===a.$$hashKey&&(b=angular.copy(d))},this),b.escapedParam=this.escapeStringForRegex(c),b.param=this.setParam(b,c),b.sortOrder=a.regexSections.length,a.regexSections.push(b)),b.$$hashKey},buildJsTestCode:function(a,b){b=this.escapeQuotes(b);var c="var tester = "+a+'; tester.test("'+b+'")';return c},escapeQuotes:function(a){return a.replace(/"/g,'\\"')},transformParam:function(a,b,c){if("range"===a.type)return[this.cleanParam(b),this.cleanParam(c)];if("Space"===a.name)return" ";var d=this.cleanParam(b);return d},cleanParam:function(a){return"number"==typeof a?a:0===a?a:a?-1!==a.indexOf('"')?this.escapeQuotes(a):a:""},addTestString:function(a,b){a.testString=b,this.runTest(a,b)},reset:function(a){return this.resetUi(a)},resetUi:function(a){return a.regexSections=[],a.testString="",a.js_code=this.initJs(),a.regex=this.initRegex(),a.result="n/a",a.shorthandRegex="",a.regexTestCode=this.initRegexTestCode(),a},updateUi:function(a){a.js_code=this.renderJsCode(a.regexSections),a.regex=this.buildRegex(a,a.js_code)},removeSection:function(a,b){return a.regexSections.splice(b,1),a.regexSections.length>0?this.updateUi(a):this.resetUi(a),a},removeSectionByHash:function(a,b){var c;if(angular.forEach(a.regexSections,function(a,d){a.$$hashKey===b&&(c=d)}),"number"==typeof c){var d=angular.copy(a.regexSections[c]);return this.removeSection(a,c),d}return!1},renderJsCode:function(a){var b="";return this.getSections(a).forEach(function(a){b+=this.addOneVerbalSection(a.method,a.type,a.param)},this),this.js_starter_code+b},renderRegexCode:function(a,b){return this.buildRegex(a,b)},updateScope:function(a,b){a.regex=b.regex,a.regexSections=b.regexSections,a.js_code=b.js_code,a.regexTestCode=b.regexTestCode,a.result=b.errorMessage},getSections:function(a){return a.sort(function(a,b){var c=a.sortOrder,d=b.sortOrder;return c==d?0:c>d?1:-1})},createRegexes:function(code){var resultCode=eval(code),newCode=resultCode.toString(),regexes={};return regexes.shorthand=newCode,regexes.longhand=-1!==newCode.indexOf('"')?this.escapeQuotes(newCode):newCode,regexes},getRegexTestCode:function(a){a=this.escapeQuotes(a);var b=this.regexTestCode.replace("%s",a);return b},initJs:function(){return this.js_starter_code},initRegex:function(){return this.regex_starter_code},initRegexTestCode:function(){return this.regexTestCode.replace('"%s"',"")},regex_starter_code:"var tester = new RegExp();",js_code:"VerEx()",js_starter_code:"VerEx()",regexTestCode:'tester.test("%s");',result:"n/a",sharedProperties:["js_code","regexTestCode","result","regexSections","regex"]}});var regexApp=angular.module("ngRegexApp");regexApp.factory("Methods",function(){var a={_then:{name:"Then",method:"then",type:"input",input:!0,listSortOrder:1},_maybe:{name:"Maybe",method:"maybe",type:"input",input:!0,listSortOrder:2},_anyOf:{name:"Any Of",method:"anyOf",type:"input",input:!0,listSortOrder:3},_range:{name:"Range",method:"range",type:"range",input:!1,range:!0,listSortOrder:4},_startOfLine:{name:"Start of Line",method:"startOfLine",type:"modifier",input:!1,listSortOrder:5},_withAnyCase:{name:"With Any Case",method:"withAnyCase",type:"modifier",input:!1,listSortOrder:6},_endOfLine:{name:"End of Line",method:"endOfLine",type:"modifier",input:!1,listSortOrder:7},_or:{name:"Or",method:"or",type:"single",input:!1,listSortOrder:8},_anything:{name:"Anything",method:"anything",type:"single",input:!1,listSortOrder:9},_word:{name:"Word",method:"word",type:"single",input:!1,listSortOrder:10}};return a});var regexApp=angular.module("ngRegexApp");regexApp.service("DataStore",function(){return{regexSections:[],regex:"var tester = new RegExp();",regex_starter_code:"var tester = new RegExp();",js_code:"VerEx()",js_starter_code:"VerEx()",regexTestCode:"tester.test();",result:"n/a",errorMessage:"",test:"Default",testString:"",shorthandRegex:""}}),angular.module("ngRegexApp").controller("ListCtrl",["$scope","MethodService","$rootScope","Methods","DataStore",function(a,b,c,d,e){a.methods=d,a.data=e,a.addSection=function(c,d){b.addSection(e,c,d),b.runTest(e,a.data.testString)},a.addRangeSection=function(c,d,f){b.addSection(e,c,d,f),b.updateScope(a,e)}}]),angular.module("ngRegexApp").controller("AllApp",["$scope","MethodService","$rootScope","Methods","DataStore",function(){}]),angular.module("ngRegexApp").controller("MainCtrl",["$scope","$rootScope","MethodService","DataStore",function(a,b,c,d){a.data=d,a.removeSection=function(a){var b=c.removeSection(d,a);return b},a.reset=function(){d.testString="",c.reset(d)},a.runTest=function(a){if(d.regexSections.length){var b=c.runTest(d,a);return b}return!1}}]),angular.module("ngRegexApp").controller("DraggleCtrl",["$scope","$rootScope","MethodService","DataStore",function(a,b,c,d){a.data=d;var e=function(){a.$apply(function(){f.find("li").each(function(b){var c=$(this).data("id");angular.forEach(a.data.regexSections,function(a){a.$$hashKey===c&&(a.sortOrder=b)})}),d.js_code=c.renderJsCode(a.data.regexSections),d.regex=c.renderRegexCode(a,d.js_code),c.runTest(d,d.testString)})},f=$(".sortable");a.$on("addSortable",function(){f.sortable("destroy"),f.off("sortupdate"),f.sortable().bind("sortupdate",e)})}]),angular.module("ngRegexApp").directive("onFinishRender",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){b.$last===!0&&a(function(){b.$emit(d.onFinishRender)})}}}]),angular.module("ngRegexApp").filter("sortByMethod",function(){return function(a){var b=[];return angular.forEach(a,function(a){b.push(a)}),b.sort(function(a,b){var c=a.listSortOrder,d=b.listSortOrder;return c==d?0:c>d?1:-1}),b}}),angular.module("ngRegexApp").directive("resultOutput",["$rootScope",function(){return{restrict:"A",link:function(a,b){a.$watch("data.result",function(a){return a&&a===!0?(b.removeClass("icon-thumbs-up-2"),b.addClass("icon-thumbs-up")):a===!1?(b.removeClass("icon-thumbs-up"),b.addClass("icon-thumbs-up-2")):("n/a"===a&&(b.removeClass("icon-thumbs-up"),b.removeClass("icon-thumbs-up-2")),void 0)})}}}]);